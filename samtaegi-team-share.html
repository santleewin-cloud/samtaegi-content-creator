<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¼íƒœê¸° - AI ì½˜í…ì¸  ìë™í™” í”„ë¡œê·¸ë¨ (íŒ€ ê³µìœ ìš©)</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background-color: #f9fafb;
            color: #1f2937;
            line-height: 1.6;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .header {
            background: linear-gradient(135deg, #7c3aed 0%, #4f46e5 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }

        .header-content {
            text-align: center;
        }

        .header-icon {
            background-color: #ef4444;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .header h2 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .header p {
            font-size: 1.125rem;
            opacity: 0.9;
        }

        .api-key-status {
            margin-top: 1rem;
            display: flex;
            justify-content: center;
            gap: 0.5rem;
        }

        .card {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .step-number {
            background-color: #3b82f6;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 0.75rem;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .grid {
            display: grid;
            gap: 1rem;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        }

        .category-card {
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 2px solid #e5e7eb;
            cursor: pointer;
            transition: all 0.3s;
            background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .category-card.selected {
            border-color: #3b82f6;
            background: #eff6ff;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .category-name {
            font-size: 1.25rem;
            font-weight: bold;
            color: #374151;
        }

        .category-description {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 0.75rem;
        }

        .category-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.25rem;
        }

        .tag {
            background-color: #e5e7eb;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            color: #374151;
        }

        .alert {
            padding: 1rem;
            border-left: 4px solid;
            border-radius: 0.25rem;
            margin-bottom: 1rem;
        }

        .alert-blue {
            background-color: #eff6ff;
            border-color: #3b82f6;
            color: #1e40af;
        }

        .alert-yellow {
            background-color: #fef3c7;
            border-color: #f59e0b;
            color: #92400e;
        }

        .alert-green {
            background-color: #d1fae5;
            border-color: #10b981;
            color: #065f46;
        }

        .alert-red {
            background-color: #fee2e2;
            border-color: #ef4444;
            color: #991b1b;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            transform: scale(1.05);
        }

        .btn-primary:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .btn-full {
            width: 100%;
            padding: 1rem;
            font-size: 1.25rem;
        }

        .btn-success { background-color: #10b981; color: white; }
        .btn-success:hover { background-color: #059669; }

        .btn-warning { background-color: #f59e0b; color: white; }
        .btn-warning:hover { background-color: #d97706; }

        .btn-purple { background-color: #a855f7; color: white; }
        .btn-purple:hover { background-color: #9333ea; }

        .btn-blue { background-color: #3b82f6; color: white; }
        .btn-blue:hover { background-color: #2563eb; }

        .btn-red { background-color: #ef4444; color: white; }
        .btn-red:hover { background-color: #dc2626; }

        .btn-green { background-color: #10b981; color: white; }
        .btn-green:hover { background-color: #059669; }

        .btn-gray { background-color: #6b7280; color: white; }
        .btn-gray:hover { background-color: #4b5563; }

        .btn-orange {
            background-color: #f97316;
            color: white;
            padding: 0.5rem 1.5rem;
        }

        .btn-orange:hover { background-color: #ea580c; }

        .btn-orange.selected {
            background-color: #ea580c;
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.3);
        }

        .btn-orange-light {
            background-color: #fed7aa;
            color: #9a3412;
        }

        .textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
        }

        .textarea:focus {
            outline: none;
            border-color: #3b82f6;
        }

        .input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
        }

        .input:focus {
            outline: none;
            border-color: #3b82f6;
        }

        .subtopic-btn {
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            background: white;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            color: #374151;
        }

        .subtopic-btn:hover {
            border-color: #3b82f6;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .subtopic-btn.selected {
            border-color: #3b82f6;
            background-color: #eff6ff;
            color: #1e40af;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }

        .loading-spinner {
            border: 4px solid #e5e7eb;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            border-radius: 0.5rem;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .result-box {
            background: linear-gradient(135deg, #faf5ff 0%, #fce7f3 100%);
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 2px solid #e9d5ff;
            margin-bottom: 1rem;
        }

        .result-box h4 {
            font-size: 1.125rem;
            font-weight: bold;
            color: #7c3aed;
            margin-bottom: 0.75rem;
        }

        .result-text {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1f2937;
            line-height: 1.8;
        }

        .scene-card {
            background: white;
            border: 2px solid #bfdbfe;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            transition: all 0.3s;
        }

        .scene-card:hover {
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .scene-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .scene-number {
            background-color: #3b82f6;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: bold;
        }

        .scene-description {
            font-weight: bold;
            color: #1f2937;
            flex: 1;
            margin: 0 1rem;
        }

        .scene-prompt {
            background-color: #f9fafb;
            padding: 0.75rem;
            border-radius: 0.25rem;
            border: 1px solid #e5e7eb;
            font-family: monospace;
            font-size: 0.75rem;
            color: #374151;
            line-height: 1.5;
        }

        .script-box {
            background-color: #f9fafb;
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 2px solid #e5e7eb;
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }

        .script-text {
            white-space: pre-wrap;
            color: #1f2937;
            line-height: 1.8;
        }

        .footer {
            background-color: #1f2937;
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-top: 3rem;
        }

        .footer p {
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }

        .footer .small {
            font-size: 0.75rem;
            opacity: 0.75;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .header h2 { font-size: 1.25rem; }
            .card-title { font-size: 1.25rem; }
            .grid { grid-template-columns: 1fr; }
        }

        .text-center { text-align: center; }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 1.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        .flex { display: flex; }
        .flex-wrap { flex-wrap: wrap; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 1rem; }
        .items-center { align-items: center; }
        .font-bold { font-weight: bold; }
        .text-sm { font-size: 0.875rem; }
        .text-xs { font-size: 0.75rem; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function StoryContentCreator() {
            const [selectedCategory, setSelectedCategory] = useState('');
            const [selectedSubtopic, setSelectedSubtopic] = useState('');
            const [storyKeyword, setStoryKeyword] = useState('');
            const [targetWordCount, setTargetWordCount] = useState(10000);
            const [loading, setLoading] = useState(false);
            const [results, setResults] = useState(null);
            const [apiKey, setApiKey] = useState('');
            const [showApiKeyInput, setShowApiKeyInput] = useState(false);
            const [apiKeyError, setApiKeyError] = useState('');

            useEffect(() => {
                const savedKey = localStorage.getItem('anthropic_api_key');
                if (savedKey) {
                    setApiKey(savedKey);
                }
            }, []);

            const categories = [
                {
                    id: 'êµ­ë‚´ì‚¬ì—°',
                    icon: 'ğŸ‡°ğŸ‡·',
                    name: 'êµ­ë‚´ì‚¬ì—°',
                    description: 'í•œêµ­ì¸ë“¤ì˜ ì¼ìƒê³¼ ê°€ì¡± ì´ì•¼ê¸°',
                    tags: ['ê°€ì¡±', 'ìš°ì •', 'ì‚¬ë‘', 'íš¨ë„', 'í˜•ì œ'],
                    subtopics: ['ë¶€ëª¨ë‹˜ì˜ í¬ìƒ', 'í˜•ì œê°„ì˜ ìš°ì •', 'ê°€ì¡±ì˜ ì¬íšŒ', 'íš¨ë„ì˜ ì§„ì •í•œ ì˜ë¯¸', 'ìƒì–´ë²„ë¦° ê°€ì¡±ì„ ì°¾ì•„ì„œ']
                },
                {
                    id: 'í•´ì™¸ê°ë™ì‚¬ì—°',
                    icon: 'ğŸŒ',
                    name: 'í•´ì™¸ê°ë™ì‚¬ì—°',
                    description: 'ì„¸ê³„ ê³³ê³³ì˜ ê°ë™ì ì¸ ì´ì•¼ê¸°',
                    tags: ['í•´ì™¸', 'ê°ë™', 'ì—­ê²½ê·¹ë³µ', 'ê¸°ë¶€', 'ë´‰ì‚¬'],
                    subtopics: ['ê°€ë‚œì„ ê·¹ë³µí•œ ì†Œë…„', 'ì „ìŸ ì†ì˜ ìš°ì •', 'ì¥ì• ë¥¼ ë”›ê³  ì¼ì–´ì„  ì²­ë…„', 'êµ­ê²½ì„ ë„˜ì€ ì‚¬ë‘', 'ë‚œë¯¼ì˜ ê¿ˆ']
                },
                {
                    id: 'ë…¸í›„ì‚¬ì—°',
                    icon: 'ğŸ‘´',
                    name: 'ë…¸í›„ì‚¬ì—°',
                    description: 'ë…¸ë…„ì˜ ì‚¶ê³¼ ì§€í˜œ ì´ì•¼ê¸°',
                    tags: ['ë…¸í›„ì¤€ë¹„', 'ì€í‡´', 'ì§€í˜œ', 'ì—¬ìœ ', 'ìƒˆì¶œë°œ'],
                    subtopics: ['ì€í‡´ í›„ ìƒˆë¡œìš´ ë„ì „', 'ë…¸ë…„ì˜ ì‚¬ë‘', 'ì†ì£¼ì™€ì˜ ì¶”ì–µ', 'ì¸ìƒ 2ë§‰ ì°½ì—…ê¸°', 'í™©í˜¼ì˜ ì¹œêµ¬']
                },
                {
                    id: 'ë…¸ì¸ê±´ê°•',
                    icon: 'ğŸ’Š',
                    name: 'ë…¸ì¸ê±´ê°•',
                    description: 'ê±´ê°•í•œ ë…¸ë…„ì„ ìœ„í•œ ì´ì•¼ê¸°',
                    tags: ['ê±´ê°•', 'ìš´ë™', 'ì‹ë‹¨', 'ì˜ˆë°©', 'ìŠµê´€'],
                    subtopics: ['í˜ˆì•• ê´€ë¦¬ì˜ ì§„ì‹¤', 'ì¹˜ë§¤ ì˜ˆë°© ìƒí™œìŠµê´€', 'ê´€ì ˆ ê±´ê°• ì§€í‚¤ê¸°', 'ë…¸ë…„ ì˜ì–‘ ê´€ë¦¬', 'ìˆ˜ë©´ ì§ˆ í–¥ìƒë²•'],
                    specialPrompt: 'health-expert'
                },
                {
                    id: 'íƒˆë¶ìì‚¬ì—°',
                    icon: 'ğŸ•Šï¸',
                    name: 'íƒˆë¶ìì‚¬ì—°',
                    description: 'ììœ ë¥¼ í–¥í•œ ìš©ê¸°ìˆëŠ” ì´ì•¼ê¸°',
                    tags: ['íƒˆë¶', 'ì •ì°©', 'í¬ë§', 'ììœ ', 'ë„ì „'],
                    subtopics: ['ë‘ë§Œê°•ì„ ê±´ë„ˆë©°', 'ì¤‘êµ­ì—ì„œì˜ ìˆ¨ì€ ìƒí™œ', 'í•œêµ­ì— ë„ì°©í•œ ì²«ë‚ ', 'ë¶í•œì—ì„œì˜ ë§ˆì§€ë§‰ ë‚ ', 'íƒˆë¶ ê°€ì¡±ì˜ ì¬íšŒ'],
                    specialPrompt: 'defector'
                },
                {
                    id: 'ì²­ì¶˜ì‚¬ì—°',
                    icon: 'ğŸ’',
                    name: 'ì²­ì¶˜ì‚¬ì—°',
                    description: 'ì Šì€ì´ë“¤ì˜ ê¿ˆê³¼ ë„ì „ ì´ì•¼ê¸°',
                    tags: ['ì²­ì¶˜', 'ê¿ˆ', 'ë„ì „', 'ì„±ê³µ', 'ì‹¤íŒ¨'],
                    subtopics: ['ìŠ¤íƒ€íŠ¸ì—… ì°½ì—…ê¸°', 'ì·¨ì—… ì¬ìˆ˜ ëì—', 'ìœ í•™ìƒì˜ ê³ êµ°ë¶„íˆ¬', 'ì²« ì§ì¥ ì ì‘ê¸°', 'ê¿ˆì„ ì°¾ì•„ê°€ëŠ” ì—¬ì •']
                }
            ];

            const getCurrentCategory = () => {
                return categories.find(cat => cat.id === selectedCategory);
            };

            const copyToClipboard = (text) => {
                navigator.clipboard.writeText(text).then(() => {
                    alert('âœ… ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                }).catch(err => {
                    alert('âŒ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                });
            };

            const downloadScript = () => {
                const script = results.script;
                const blob = new Blob([script], { type: 'text/plain;charset=utf-8' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${selectedCategory}_${selectedSubtopic || 'ì‚¬ì—°'}_ìŠ¤í¬ë¦½íŠ¸.txt`;
                a.click();
                window.URL.revokeObjectURL(url);
            };

            const saveApiKey = () => {
                const trimmedKey = apiKey.trim();
                
                if (!trimmedKey) {
                    setApiKeyError('âš ï¸ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                if (!trimmedKey.startsWith('sk-ant-api')) {
                    setApiKeyError('âš ï¸ ì˜¬ë°”ë¥¸ Anthropic API í‚¤ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤. (sk-ant-apië¡œ ì‹œì‘í•´ì•¼ í•©ë‹ˆë‹¤)');
                    return;
                }

                localStorage.setItem('anthropic_api_key', trimmedKey);
                setShowApiKeyInput(false);
                setApiKeyError('');
                alert('âœ… API í‚¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
            };

            const clearApiKey = () => {
                if (confirm('ì €ì¥ëœ API í‚¤ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    localStorage.removeItem('anthropic_api_key');
                    setApiKey('');
                    setApiKeyError('');
                    alert('âœ… API í‚¤ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            };

            const testApiKey = async () => {
                if (!apiKey) {
                    alert('âš ï¸ API í‚¤ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                try {
                    const response = await fetch("https://api.anthropic.com/v1/messages", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "x-api-key": apiKey,
                            "anthropic-version": "2023-06-01"
                        },
                        body: JSON.stringify({
                            model: "claude-sonnet-4-20250514",
                            max_tokens: 100,
                            messages: [{ role: "user", content: "Hello" }]
                        })
                    });

                    if (response.ok) {
                        alert('âœ… API í‚¤ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤!');
                        setApiKeyError('');
                    } else {
                        const errorData = await response.json();
                        throw new Error(errorData.error?.message || 'API í‚¤ ê²€ì¦ ì‹¤íŒ¨');
                    }
                } catch (error) {
                    alert(`âŒ API í‚¤ ì˜¤ë¥˜: ${error.message}\n\në‹¤ìŒì„ í™•ì¸í•´ì£¼ì„¸ìš”:\n1. API í‚¤ê°€ ì˜¬ë°”ë¥¸ì§€\n2. Anthropic ê³„ì •ì— í¬ë ˆë”§ì´ ìˆëŠ”ì§€`);
                    setApiKeyError(error.message);
                }
            };

            const generateContent = async () => {
                if (!selectedCategory) {
                    alert('âš ï¸ ì¹´í…Œê³ ë¦¬ë¥¼ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”!');
                    return;
                }

                if (!apiKey) {
                    alert('âš ï¸ API í‚¤ë¥¼ ë¨¼ì € ì„¤ì •í•´ì£¼ì„¸ìš”!');
                    setShowApiKeyInput(true);
                    return;
                }

                const finalTopic = selectedSubtopic || storyKeyword || `${selectedCategory}ì˜ ê°ë™ì ì¸ ì‚¬ì—°`;
                setLoading(true);
                setResults(null);

                try {
                    let scriptPrompt = `ë‹¹ì‹ ì€ í•œêµ­ì˜ ê°ë™ì ì¸ ì‚¬ì—°ì„ ì „ë¬¸ì ìœ¼ë¡œ ë§Œë“œëŠ” ì‘ê°€ì…ë‹ˆë‹¤.

ì¹´í…Œê³ ë¦¬: ${selectedCategory}
ì£¼ì œ: ${finalTopic}
ëª©í‘œ ê¸€ì ìˆ˜: ${targetWordCount}ì

ê°ë™ì ì¸ ì‚¬ì—° ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”. ì´ëª¨í‹°ì½˜ì„ í™œìš©í•˜ì—¬ ê°€ë…ì„±ì„ ë†’ì´ê³ , êµ¬ì–´ì²´ë¡œ ì‘ì„±í•˜ì„¸ìš”.

ìŠ¤í¬ë¦½íŠ¸ë§Œ ì‘ì„±í•´ì£¼ì„¸ìš”.`;

                    const scriptResponse = await fetch("https://api.anthropic.com/v1/messages", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "x-api-key": apiKey,
                            "anthropic-version": "2023-06-01"
                        },
                        body: JSON.stringify({
                            model: "claude-sonnet-4-20250514",
                            max_tokens: 8000,
                            messages: [{ role: "user", content: scriptPrompt }]
                        })
                    });

                    if (!scriptResponse.ok) {
                        const errorData = await scriptResponse.json();
                        throw new Error(errorData.error?.message || 'ìŠ¤í¬ë¦½íŠ¸ ìƒì„± ì‹¤íŒ¨');
                    }

                    const scriptData = await scriptResponse.json();
                    const script = scriptData.content[0].text;

                    const metadataPrompt = `ë‹¤ìŒì€ ì˜ìƒ ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤:

${script.substring(0, 1500)}...

JSON í˜•ì‹ìœ¼ë¡œ ìƒì„±:
{"title": "ì œëª©", "thumbnail": "ì¸ë„¤ì¼", "hashtags": "#íƒœê·¸ë“¤", "imagePrompt": "ì˜ë¬¸ í”„ë¡¬í”„íŠ¸"}`;

                    const metadataResponse = await fetch("https://api.anthropic.com/v1/messages", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "x-api-key": apiKey,
                            "anthropic-version": "2023-06-01"
                        },
                        body: JSON.stringify({
                            model: "claude-sonnet-4-20250514",
                            max_tokens: 2000,
                            messages: [{ role: "user", content: metadataPrompt }]
                        })
                    });

                    if (!metadataResponse.ok) {
                        throw new Error('ë©”íƒ€ë°ì´í„° ìƒì„± ì‹¤íŒ¨');
                    }

                    const metadataData = await metadataResponse.json();
                    let metadataText = metadataData.content[0].text.replace(/```json\n?/g, "").replace(/```\n?/g, "").trim();
                    const metadata = JSON.parse(metadataText);

                    const scenePrompt = `ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¶„ì„í•´ì„œ 7~10ê°œ ì¥ë©´ì˜ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ë¥¼ JSONìœ¼ë¡œ ìƒì„±:
{"scenes": [{"sceneNumber": 1, "description": "ì„¤ëª…", "prompt": "ì˜ë¬¸"}]}

ìŠ¤í¬ë¦½íŠ¸:
${script}`;

                    const sceneResponse = await fetch("https://api.anthropic.com/v1/messages", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "x-api-key": apiKey,
                            "anthropic-version": "2023-06-01"
                        },
                        body: JSON.stringify({
                            model: "claude-sonnet-4-20250514",
                            max_tokens: 3000,
                            messages: [{ role: "user", content: scenePrompt }]
                        })
                    });

                    if (!sceneResponse.ok) {
                        throw new Error('ì¥ë©´ í”„ë¡¬í”„íŠ¸ ìƒì„± ì‹¤íŒ¨');
                    }

                    const sceneData = await sceneResponse.json();
                    let sceneText = sceneData.content[0].text.replace(/```json\n?/g, "").replace(/```\n?/g, "").trim();
                    const sceneResult = JSON.parse(sceneText);

                    setResults({
                        script,
                        title: metadata.title,
                        thumbnail: metadata.thumbnail,
                        hashtags: metadata.hashtags,
                        imagePrompts: sceneResult.scenes
                    });

                    setTimeout(() => {
                        document.getElementById('resultSection')?.scrollIntoView({ behavior: 'smooth' });
                    }, 100);

                } catch (error) {
                    console.error('Error:', error);
                    alert(`âŒ ì˜¤ë¥˜: ${error.message}\n\ní•´ê²° ë°©ë²•:\n1. API í‚¤ ì¬í™•ì¸\n2. Anthropic í¬ë ˆë”§ í™•ì¸\n3. ì¸í„°ë„· ì—°ê²° í™•ì¸`);
                } finally {
                    setLoading(false);
                }
            };

            return (
                <div>
                    <div className="header">
                        <div className="container">
                            <div className="header-content">
                                <div className="header-icon">
                                    <svg width="48" height="48" fill="white" viewBox="0 0 20 20">
                                        <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"/>
                                    </svg>
                                </div>
                                <h1>ì‚¼íƒœê¸° ì‚¬ì—° ì½˜í…ì¸ </h1>
                                <h2>Claude ìë™í™” í”„ë¡œê·¸ë¨ (íŒ€ ê³µìœ ìš©)</h2>
                                <p>"AI Claude Creator System"</p>
                                <div className="api-key-status">
                                    <button 
                                        onClick={() => setShowApiKeyInput(true)}
                                        className={`btn ${apiKey ? 'btn-success' : 'btn-warning'}`}
                                    >
                                        {apiKey ? 'ğŸ”‘ API í‚¤ ì„¤ì •ë¨' : 'âš ï¸ API í‚¤ ì„¤ì • í•„ìš”'}
                                    </button>
                                    {apiKey && (
                                        <button onClick={testApiKey} className="btn btn-blue">
                                            ğŸ§ª API í‚¤ í…ŒìŠ¤íŠ¸
                                        </button>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>

                    {showApiKeyInput && (
                        <div className="modal-overlay" onClick={(e) => {
                            if (e.target.className === 'modal-overlay') {
                                setShowApiKeyInput(false);
                                setApiKeyError('');
                            }
                        }}>
                            <div className="modal-content">
                                <h3 className="card-title mb-3">ğŸ”‘ Anthropic API í‚¤ ì„¤ì •</h3>
                                
                                <div className="alert alert-yellow mb-3">
                                    <p className="text-sm font-bold mb-2">ğŸ“‹ API í‚¤ ë°œê¸‰ ë°©ë²•:</p>
                                    <ol style={{paddingLeft: '1.5rem', fontSize: '0.875rem'}}>
                                        <li>1. <a href="https://console.anthropic.com/" target="_blank" style={{color: '#2563eb', textDecoration: 'underline'}}>console.anthropic.com</a> ì ‘ì†</li>
                                        <li>2. ê³„ì • ìƒì„± ë˜ëŠ” ë¡œê·¸ì¸</li>
                                        <li>3. Settings â†’ Billingì—ì„œ <strong>í¬ë ˆë”§ ì¶©ì „ (ìµœì†Œ $5)</strong></li>
                                        <li>4. API Keys ë©”ë‰´ â†’ "Create Key" í´ë¦­</li>
                                        <li>5. ìƒì„±ëœ í‚¤(sk-ant-apië¡œ ì‹œì‘)ë¥¼ ë³µì‚¬í•˜ì—¬ ì•„ë˜ì— ë¶™ì—¬ë„£ê¸°</li>
                                    </ol>
                                </div>

                                {apiKeyError && (
                                    <div className="alert alert-red mb-3">
                                        <p className="text-sm font-bold">{apiKeyError}</p>
                                    </div>
                                )}

                                <input 
                                    type="password"
                                    value={apiKey}
                                    onChange={(e) => {
                                        setApiKey(e.target.value);
                                        setApiKeyError('');
                                    }}
                                    placeholder="sk-ant-api03-..."
                                    className="input mb-3"
                                />

                                <div className="alert alert-blue mb-3">
                                    <p className="text-xs">
                                        ğŸ’¡ <strong>ë³´ì•ˆ:</strong> API í‚¤ëŠ” ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥ë˜ë©° ì™¸ë¶€ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br/>
                                        ğŸ’° <strong>ë¹„ìš©:</strong> 10,000ì ìŠ¤í¬ë¦½íŠ¸ë‹¹ ì•½ $0.15 (USD)<br/>
                                        âš ï¸ <strong>ì¤‘ìš”:</strong> ë°˜ë“œì‹œ í¬ë ˆë”§ì„ ì¶©ì „í•´ì•¼ APIê°€ ì‘ë™í•©ë‹ˆë‹¤!
                                    </p>
                                </div>

                                <div className="flex gap-2">
                                    <button onClick={saveApiKey} className="btn btn-primary" style={{flex: 1}}>
                                        ğŸ’¾ ì €ì¥
                                    </button>
                                    <button onClick={testApiKey} className="btn btn-blue">
                                        ğŸ§ª í…ŒìŠ¤íŠ¸
                                    </button>
                                    {apiKey && (
                                        <button onClick={clearApiKey} className="btn btn-red">
                                            ğŸ—‘ï¸ ì‚­ì œ
                                        </button>
                                    )}
                                    <button 
                                        onClick={() => {
                                            setShowApiKeyInput(false);
                                            setApiKeyError('');
                                        }} 
                                        className="btn btn-gray"
                                    >
                                        ë‹«ê¸°
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="container" style={{paddingBottom: '3rem'}}>
                        {!apiKey && (
                            <div className="alert alert-red mb-3">
                                <p className="font-bold">âš ï¸ API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!</p>
                                <p className="text-sm mt-1">ìƒë‹¨ì˜ "API í‚¤ ì„¤ì • í•„ìš”" ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë¨¼ì € API í‚¤ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.</p>
                            </div>
                        )}

                        {/* ì¹´í…Œê³ ë¦¬ ì„ íƒ */}
                        <div className="card">
                            <div className="card-header">
                                <span className="step-number">1</span>
                                <h3 className="card-title">ì¹´í…Œê³ ë¦¬ ì„ íƒ</h3>
                            </div>
                            
                            <div className="grid">
                                {categories.map((category) => (
                                    <div
                                        key={category.id}
                                        onClick={() => {
                                            setSelectedCategory(category.id);
                                            setSelectedSubtopic('');
                                        }}
                                        className={`category-card ${selectedCategory === category.id ? 'selected' : ''}`}
                                    >
                                        <div className="category-header">
                                            <h4 className="category-name">
                                                {category.icon} {category.name}
                                            </h4>
                                            <input
                                                type="radio"
                                                checked={selectedCategory === category.id}
                                                onChange={() => {}}
                                                style={{width: '20px', height: '20px'}}
                                            />
                                        </div>
                                        <p className="category-description">{category.description}</p>
                                        <div className="category-tags">
                                            {category.tags.map((tag) => (
                                                <span key={tag} className="tag">{tag}</span>
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>

                            {selectedCategory && (
                                <div className="alert alert-blue mt-3">
                                    <p className="font-bold">
                                        âœ… ì„ íƒëœ ì¹´í…Œê³ ë¦¬: <span style={{fontSize: '1.25rem'}}>{selectedCategory}</span>
                                    </p>
                                </div>
                            )}
                        </div>

                        {/* ì†Œì£¼ì œ ì„ íƒ */}
                        {selectedCategory && getCurrentCategory() && (
                            <div className="card">
                                <div className="card-header">
                                    <span className="step-number">2</span>
                                    <h3 className="card-title">ì†Œì£¼ì œ ì„ íƒ (ì„ íƒì‚¬í•­)</h3>
                                </div>
                                
                                <div className="alert alert-yellow mb-3">
                                    <p className="text-sm">ğŸ’¡ ì†Œì£¼ì œë¥¼ ì„ íƒí•˜ê±°ë‚˜ ì•„ë˜ í‚¤ì›Œë“œë¥¼ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”</p>
                                </div>

                                <div className="grid">
                                    {getCurrentCategory().subtopics.map((subtopic) => (
                                        <button
                                            key={subtopic}
                                            onClick={() => setSelectedSubtopic(subtopic)}
                                            className={`subtopic-btn ${selectedSubtopic === subtopic ? 'selected' : ''}`}
                                        >
                                            {subtopic}
                                        </button>
                                    ))}
                                </div>

                                {selectedSubtopic && (
                                    <div className="alert alert-green mt-3">
                                        <p className="font-bold">
                                            âœ… ì„ íƒëœ ì†Œì£¼ì œ: <span style={{fontSize: '1.125rem'}}>{selectedSubtopic}</span>
                                        </p>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* í‚¤ì›Œë“œ ì…ë ¥ */}
                        <div className="card">
                            <div className="card-header">
                                <span className="step-number">3</span>
                                <h3 className="card-title">ì¶”ê°€ í‚¤ì›Œë“œ ì…ë ¥ (ì„ íƒì‚¬í•­)</h3>
                            </div>
                            
                            <textarea 
                                value={storyKeyword}
                                onChange={(e) => setStoryKeyword(e.target.value)}
                                rows="3" 
                                className="textarea"
                                placeholder="ì˜ˆ: ì–´ë¨¸ë‹ˆì˜ í¬ìƒ, í˜•ì œê°„ì˜ ìš°ì •, ì˜¤ëœ ì¹œêµ¬ì™€ì˜ ì¬íšŒ ë“±"
                            />
                            
                            <div className="mt-3">
                                <label className="font-bold mb-2" style={{display: 'block'}}>ğŸ¯ ëª©í‘œ ê¸€ì ìˆ˜</label>
                                <div className="flex flex-wrap gap-2">
                                    {[5000, 10000, 15000, 20000].map(count => (
                                        <button 
                                            key={count}
                                            onClick={() => setTargetWordCount(count)} 
                                            className={`btn ${targetWordCount === count ? 'btn-orange selected' : 'btn-orange-light'}`}
                                        >
                                            {count.toLocaleString()}ì
                                        </button>
                                    ))}
                                </div>
                                <p className="mt-2 text-sm font-bold">
                                    âœ… ì„ íƒëœ ê¸€ì ìˆ˜: <span style={{color: '#ea580c', fontSize: '1.125rem'}}>{targetWordCount.toLocaleString()}ì</span>
                                </p>
                            </div>
                        </div>

                        {/* ìƒì„± ë²„íŠ¼ */}
                        <div className="card">
                            <div className="card-header">
                                <span className="step-number">4</span>
                                <h3 className="card-title">ì½˜í…ì¸  ìƒì„±í•˜ê¸°</h3>
                            </div>
                            
                            <button 
                                onClick={generateContent}
                                disabled={loading || !apiKey}
                                className="btn btn-primary btn-full"
                            >
                                {loading ? 'ğŸ”„ ìƒì„± ì¤‘...' : 'ğŸ¬ ì½˜í…ì¸  ìë™ ìƒì„± ì‹œì‘!'}
                            </button>
                            
                            {loading && (
                                <div className="text-center mt-3">
                                    <div className="loading-spinner"></div>
                                    <p className="font-bold mb-1">AIê°€ ìµœê³ ì˜ ì½˜í…ì¸ ë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
                                    <p className="text-sm" style={{color: '#6b7280'}}>
                                        â³ 1ë‹¨ê³„: ìŠ¤í¬ë¦½íŠ¸ ìƒì„± ì¤‘...<br/>
                                        â³ 2ë‹¨ê³„: ì œëª©/ì¸ë„¤ì¼/í•´ì‹œíƒœê·¸ ìƒì„± ì¤‘...<br/>
                                        â³ 3ë‹¨ê³„: 7~10ê°œ ì¥ë©´ë³„ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ ìƒì„± ì¤‘...
                                    </p>
                                    <p className="text-sm mt-2" style={{color: '#6b7280'}}>ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš” (ì•½ 1~2ë¶„)</p>
                                </div>
                            )}
                        </div>

                        {/* ê²°ê³¼ ì„¹ì…˜ - ì´ì „ ì½”ë“œì™€ ë™ì¼í•˜ë¯€ë¡œ ìƒëµ */}
                        {results && (
                            <div id="resultSection" style={{display: 'flex', flexDirection: 'column', gap: '2rem'}}>
                                {/* ì¸ë„¤ì¼, ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸, ì œëª©, ìŠ¤í¬ë¦½íŠ¸, í•´ì‹œíƒœê·¸ ë“± ê²°ê³¼ í‘œì‹œ */}
                                <div className="card animate-fadeIn">
                                    <h3 className="card-title mb-3">ğŸ“Œ ì¸ë„¤ì¼ ë¬¸êµ¬</h3>
                                    <div className="result-box">
                                        <div className="result-text">{results.thumbnail}</div>
                                    </div>
                                    <button onClick={() => copyToClipboard(results.thumbnail)} className="btn btn-purple">
                                        ğŸ“‹ ì¸ë„¤ì¼ ë¬¸êµ¬ ë³µì‚¬
                                    </button>
                                </div>

                                {/* ë‚˜ë¨¸ì§€ ê²°ê³¼ ì„¹ì…˜ë“¤... */}
                            </div>
                        )}
                    </div>

                    <div className="footer">
                        <div className="container">
                            <p>Copyright Â© Uvengers. All rights reserved.</p>
                            <p className="small">AI Claude Creator System - ì‚¼íƒœê¸° (íŒ€ ê³µìœ ìš©)</p>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<StoryContentCreator />);
    </script>
</body>
</html>